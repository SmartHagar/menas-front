(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{1973:function(e,t,r){Promise.resolve().then(r.t.bind(r,8326,23)),Promise.resolve().then(r.bind(r,7016))},7016:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(5782),n=r(5967),l=r(4033),i=r(2265),o=r(1865),c=r(1490),d=r(2230);t.default=e=>{let{setLogin:t,cekToken:r}=(0,n.Z)(),u=(0,l.useRouter)(),[m,h]=(0,i.useState)(""),[p,x]=(0,i.useState)(!1),{register:f,handleSubmit:b,formState:{errors:g}}=(0,o.cI)(),v=async()=>{let e=c.Z.get("token");if(e){let e=await r();if(!(null==e?void 0:e.error)){var t;let r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.role;u.push("/".concat(r))}}x(!1)};(0,i.useEffect)(()=>{v()},[]);let k=async e=>{x(!0),h("");let r=await t(e);if(null==r?void 0:r.error){var s;console.log(null==r?void 0:r.error),h(null==r?void 0:null===(s=r.error)||void 0===s?void 0:s.message)}else{let{data:e}=r;c.Z.set("token",e.token),c.Z.set("role",e.role);let t=JSON.stringify(e.petugas);if(c.Z.set("petugas",t),null==e?void 0:e.pegawai){let t=JSON.stringify(e.pegawai);console.log({pegawai:t}),c.Z.set("pegawai",t)}u.push("/".concat(e.role))}setTimeout(()=>{x(!1)},1e3)};return(0,s.jsxs)("div",{className:"px-5 py-7",children:[m&&(0,s.jsx)("p",{className:"text-red-600 text-center",children:m}),(0,s.jsxs)("form",{action:"",children:[(0,s.jsx)("div",{className:"pb-2 pt-4",children:(0,s.jsx)(a.Z,{label:"Email",register:f,type:"text",name:"email",placeholder:"Email",required:!0,errors:g.email})}),(0,s.jsx)("div",{className:"pb-2 pt-4",children:(0,s.jsx)(a.Z,{label:"Password",register:f,type:"password",name:"password",placeholder:"Password",required:!0,errors:g.email})}),(0,s.jsx)("div",{className:"mt-5",children:p?(0,s.jsx)(d.Z,{}):(0,s.jsxs)("button",{type:"submit",className:"transition duration-200 bg-blue-500 hover:bg-blue-600 focus:bg-blue-700 focus:shadow-sm focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 text-white w-full py-2.5 rounded-lg text-sm shadow-sm hover:shadow-md font-semibold text-center inline-block",onClick:b(k),children:[(0,s.jsx)("span",{className:"inline-block mr-2",children:"Login"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4 inline-block",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})}},5782:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=e=>{let{label:t,register:r,required:a,name:n,minLength:l,maxLength:i,errors:o,valueAsNumber:c,type:d="text",readOnly:u,placeholder:m,autoComplete:h="on",addClass:p,value:x,defaultValue:f,max:b,min:g,step:v}=e;return(0,s.jsxs)("div",{className:p,children:[(0,s.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),a&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:d,id:n,readOnly:u,placeholder:m,autoComplete:h,...r(n,{required:a,minLength:l,maxLength:i,valueAsNumber:c,max:b,min:g,step:v}),defaultValue:f,value:x})}),(null==o?void 0:o.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",i," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]}),(null==o?void 0:o.type)==="max"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",b,"."]}),(null==o?void 0:o.type)==="min"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",g,"."]})]})}},2230:function(e,t,r){"use strict";var s=r(7437);r(2265),t.Z=()=>(0,s.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-primary border-t-transparent shadow-md"})},8875:function(e,t,r){"use strict";r.d(t,{I8:function(){return n},Sj:function(){return l},_n:function(){return a},hi:function(){return i}});var s=r(2173);let a="https://back.menas.ta-uogp.my.id",n=s.Z.create({baseURL:"".concat(a,"/auth")}),l=s.Z.create({baseURL:"".concat(a,"/crud")}),i=s.Z.create({baseURL:"".concat(a,"/api")});s.Z.create({baseURL:"".concat(a,"/storage")})},5967:function(e,t,r){"use strict";var s=r(4660),a=r(4810),n=r(8875),l=r(1490);let i=(0,s.Ue)((0,a.mW)((e,t)=>({setToken:async()=>{let e=l.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=i}},function(e){e.O(0,[2750,1865,8326,2971,2472,1744],function(){return e(e.s=1973)}),_N_E=e.O()}]);