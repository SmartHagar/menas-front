(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9177],{4014:function(e,t,a){Promise.resolve().then(a.bind(a,1001))},1001:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(7437),s=a(2265),l=a(2230),d=a(3423),n=a(3842),o=a(4660),i=a(4810),c=a(8875),u=a(5967);let h=(0,o.Ue)((0,i.mW)((e,t)=>({dtDokter:[],setDokter:async t=>{let{page:a=1,limit:r=10,search:s,sortby:l,order:d}=t;try{let t=await u.Z.getState().setToken(),n=await (0,c.Sj)({method:"get",url:"/dokter",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:a,search:s,sortby:l,order:d}});return e(e=>({...e,dtDokter:n.data.data})),{status:"berhasil",data:n.data}}catch(e){var n;return{status:"error",error:null===(n=e.response)||void 0===n?void 0:n.data}}},setShowDokter:async t=>{try{let a=await u.Z.getState().setToken(),r=await (0,c.Sj)({method:"get",url:"/dokter/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtDokter:r.data.data})),{status:"berhasil",data:r.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async t=>{try{let a=await u.Z.getState().setToken(),r=await (0,c.Sj)({method:"post",url:"/dokter",headers:{Authorization:"Bearer ".concat(a)},data:t});return e(e=>({dtDokter:{last_page:e.dtDokter.last_page,current_page:e.dtDokter.current_page,data:[r.data.data,...e.dtDokter.data]}})),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await u.Z.getState().setToken(),r=await (0,c.Sj)({method:"delete",url:"/dokter/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtDokter:{last_page:e.dtDokter.last_page,current_page:e.dtDokter.current_page,data:e.dtDokter.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let r=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"PUT",url:"/dokter/".concat(t),headers:{Authorization:"Bearer ".concat(r)},data:a});return e(e=>({dtDokter:{last_page:e.dtDokter.last_page,current_page:e.dtDokter.current_page,data:e.dtDokter.data.map(e=>e.id===t?{...e,...s.data.data}:e)}})),{status:"berhasil update",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}})));var m=a(4033),x=e=>{let{setDelete:t,setEdit:a,search:o}=e,{setDokter:i,dtDokter:c}=h(),[u,x]=(0,s.useState)(1),[k,p]=(0,s.useState)(10),[g,j]=(0,s.useState)(!0),f=(0,m.useSearchParams)(),v=f.get("sortby")||"",b=f.get("order")||"",w=async()=>{await i({page:u,limit:k,search:o,sortby:v,order:b}),j(!1)};return(0,s.useEffect)(()=>(w(),()=>{}),[u,k]),(0,s.useEffect)(()=>{x(1),w()},[o,v,b]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:g?(0,r.jsx)(l.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(n.Z,{headTable:["No","Nama Dokter","Aksi"],tableBodies:["nm_dokter"],dataTable:c.data,page:u,limit:k,setEdit:a,setDelete:t,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(d.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:x})})]})})},k=a(5782),p=a(8963),g=a(311),j=a(1865);a(1240);var f=e=>{let{register:t,errors:a,control:s,dtEdit:l,watch:d,setValue:n,showModal:o}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(k.Z,{label:"Nama Dokter",name:"nm_dokter",register:t,required:!0,minLength:2,errors:a.nm_dokter,addClass:"col-span-4"})})},v=a(8528),b=e=>{let{showModal:t,setShowModal:a,dtEdit:l}=e,{addData:d,updateData:n}=h(),{register:o,handleSubmit:i,setValue:c,control:u,formState:{errors:m},watch:x}=(0,j.cI)(),b=()=>{c("id",""),c("nm_dokter","")};(0,s.useEffect)(()=>{l?(c("id",l.id),c("nm_dokter",l.nm_dokter)):b()},[t,l]);let w=async e=>{if(console.log({row:e}),l){let{data:t}=await n(l.id,e);(0,g.Z)({event:t}),a(!1)}else{let{data:t}=await d(e);console.log({data:t}),(0,g.Z)({event:t}),(null==t?void 0:t.type)!=="success"||b()}};return(0,r.jsx)(p.Z,{title:"Form Dokter",showModal:t,setShowModal:a,children:(0,r.jsxs)("form",{onSubmit:i(w),children:[(0,r.jsx)(k.Z,{name:"id",register:o,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(f,{register:o,errors:m,dtEdit:l,control:u,watch:x,setValue:c,showModal:t})}),(0,r.jsx)("div",{children:(0,r.jsx)(v.Z,{onClick:i(w),children:"Simpan"})})]})})},w=a(3015),y=a(5925),D=a(4123),S=()=>{let{removeData:e}=h(),[t,a]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),[n,o]=(0,s.useState)(),[i,c]=(0,s.useState)(),[u,m]=(0,s.useState)(""),k=async t=>{let{id:a,isDelete:r}=t;if(o(a),r){let{data:t}=await e(n);(0,g.Z)({event:t}),d(!1)}else d(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.x7,{}),(0,r.jsx)(b,{dtEdit:i,showModal:t,setShowModal:a}),(0,r.jsx)(w.Z,{showDel:l,setShowDel:d,setDelete:k}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Dokter"}),(0,r.jsx)("div",{children:(0,r.jsx)(v.Z,{onClick:()=>{a(!0),c(null)},children:"Tambah Data"})})]}),(0,r.jsx)(D.Z,{placeholder:"Cari Dokter",onChange:e=>m(e)})]}),(0,r.jsx)(x,{setDelete:k,setEdit:e=>{a(!0),c(e)},search:u})]})}},5782:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{label:t,register:a,required:s,name:l,minLength:d,maxLength:n,errors:o,valueAsNumber:i,type:c="text",readOnly:u,placeholder:h,autoComplete:m="on",addClass:x,value:k,defaultValue:p,max:g,min:j,step:f}=e;return(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:c,id:l,readOnly:u,placeholder:h,autoComplete:m,...a(l,{required:s,minLength:d,maxLength:n,valueAsNumber:i,max:g,min:j,step:f}),defaultValue:p,value:k})}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",d," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",n," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]}),(null==o?void 0:o.type)==="max"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",g,"."]}),(null==o?void 0:o.type)==="min"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",j,"."]})]})}},1240:function(){}},function(e){e.O(0,[8447,6990,2750,5869,1865,341,2710,2971,2472,1744],function(){return e(e.s=4014)}),_N_E=e.O()}]);