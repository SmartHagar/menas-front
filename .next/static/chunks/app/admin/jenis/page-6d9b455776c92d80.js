(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7328],{4671:function(e,t,a){Promise.resolve().then(a.bind(a,9374))},9374:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var s=a(7437),r=a(2265),n=a(2230),i=a(3423),l=a(3842),d=a(4660),o=a(4810),c=a(8875),u=a(5967);let h=(0,d.Ue)((0,o.mW)((e,t)=>({dtJenis:[],setJenis:async t=>{let{page:a=1,limit:s=10,search:r,sortby:n,order:i}=t;try{let t=await u.Z.getState().setToken(),l=await (0,c.Sj)({method:"get",url:"/jenis",headers:{Authorization:"Bearer ".concat(t)},params:{limit:s,page:a,search:r,sortby:n,order:i}});return e(e=>({...e,dtJenis:l.data.data})),{status:"berhasil",data:l.data}}catch(e){var l;return{status:"error",error:null===(l=e.response)||void 0===l?void 0:l.data}}},setShowJenis:async t=>{try{let a=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"get",url:"/jenis/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({...e,dtJenis:s.data.data})),{status:"berhasil",data:s.data}}catch(e){var a;return{status:"error",error:null===(a=e.response)||void 0===a?void 0:a.data}}},addData:async t=>{try{let a=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"post",url:"/jenis",headers:{Authorization:"Bearer ".concat(a)},data:t});return e(e=>({dtJenis:{last_page:e.dtJenis.last_page,current_page:e.dtJenis.current_page,data:[s.data.data,...e.dtJenis.data]}})),{status:"berhasil tambah",data:s.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"delete",url:"/jenis/".concat(t),headers:{Authorization:"Bearer ".concat(a)}});return e(e=>({dtJenis:{last_page:e.dtJenis.last_page,current_page:e.dtJenis.current_page,data:e.dtJenis.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:s.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let s=await u.Z.getState().setToken(),r=await (0,c.Sj)({method:"PUT",url:"/jenis/".concat(t),headers:{Authorization:"Bearer ".concat(s)},data:a});return e(e=>({dtJenis:{last_page:e.dtJenis.last_page,current_page:e.dtJenis.current_page,data:e.dtJenis.data.map(e=>e.id===t?{...e,...r.data.data}:e)}})),{status:"berhasil update",data:r.data}}catch(e){return{status:"error",data:e.response.data}}}})));var m=a(4033),x=e=>{let{setDelete:t,setEdit:a,search:d}=e,{setJenis:o,dtJenis:c}=h(),[u,x]=(0,r.useState)(1),[p,g]=(0,r.useState)(10),[j,f]=(0,r.useState)(!0),v=(0,m.useSearchParams)(),b=v.get("sortby")||"",w=v.get("order")||"",y=async()=>{await o({page:u,limit:p,search:d,sortby:b,order:w}),f(!1)};return(0,r.useEffect)(()=>(y(),()=>{}),[u,p]),(0,r.useEffect)(()=>{x(1),y()},[d,b,w]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:j?(0,s.jsx)(n.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.Z,{headTable:["No","Nama Jenis","Aksi"],tableBodies:["nama"],dataTable:c.data,page:u,limit:p,setEdit:a,setDelete:t,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:x})})]})})},p=a(5782),g=a(8963),j=a(311),f=a(1865);a(1240);var v=e=>{let{register:t,errors:a,control:r,dtEdit:n,watch:i,setValue:l,showModal:d}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Z,{label:"Jenis Obat",name:"nama",register:t,required:!0,minLength:2,errors:a.nama,addClass:"col-span-4"})})},b=a(8528),w=e=>{let{showModal:t,setShowModal:a,dtEdit:n}=e,{addData:i,updateData:l}=h(),{register:d,handleSubmit:o,setValue:c,control:u,formState:{errors:m},watch:x}=(0,f.cI)(),w=()=>{c("id",""),c("nama","")};(0,r.useEffect)(()=>{n?(c("id",n.id),c("nama",n.nama)):w()},[t,n]);let y=async e=>{if(console.log({row:e}),n){let{data:t}=await l(n.id,e);(0,j.Z)({event:t}),a(!1)}else{let{data:t}=await i(e);console.log({data:t}),(0,j.Z)({event:t}),(null==t?void 0:t.type)!=="success"||w()}};return(0,s.jsx)(g.Z,{title:"Form Jenis",showModal:t,setShowModal:a,children:(0,s.jsxs)("form",{onSubmit:o(y),children:[(0,s.jsx)(p.Z,{name:"id",register:d,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(v,{register:d,errors:m,dtEdit:n,control:u,watch:x,setValue:c,showModal:t})}),(0,s.jsx)("div",{children:(0,s.jsx)(b.Z,{onClick:o(y),children:"Simpan"})})]})})},y=a(3015),k=a(5925),S=a(4123),J=()=>{let{removeData:e}=h(),[t,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[l,d]=(0,r.useState)(),[o,c]=(0,r.useState)(),[u,m]=(0,r.useState)(""),p=async t=>{let{id:a,isDelete:s}=t;if(d(a),s){let{data:t}=await e(l);(0,j.Z)({event:t}),i(!1)}else i(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(k.x7,{}),(0,s.jsx)(w,{dtEdit:o,showModal:t,setShowModal:a}),(0,s.jsx)(y.Z,{showDel:n,setShowDel:i,setDelete:p}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsx)("p",{children:"Silahkan Mengolah data Jenis"}),(0,s.jsx)("div",{children:(0,s.jsx)(b.Z,{onClick:()=>{a(!0),c(null)},children:"Tambah Data"})})]}),(0,s.jsx)(S.Z,{placeholder:"Cari Jenis",onChange:e=>m(e)})]}),(0,s.jsx)(x,{setDelete:p,setEdit:e=>{a(!0),c(e)},search:u})]})}},5782:function(e,t,a){"use strict";var s=a(7437);a(2265),t.Z=e=>{let{label:t,register:a,required:r,name:n,minLength:i,maxLength:l,errors:d,valueAsNumber:o,type:c="text",readOnly:u,placeholder:h,autoComplete:m="on",addClass:x,value:p,defaultValue:g,max:j,min:f,step:v}=e;return(0,s.jsxs)("div",{className:x,children:[(0,s.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:c,id:n,readOnly:u,placeholder:h,autoComplete:m,...a(n,{required:r,minLength:i,maxLength:l,valueAsNumber:o,max:j,min:f,step:v}),defaultValue:g,value:p})}),(null==d?void 0:d.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",i," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",l," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]}),(null==d?void 0:d.type)==="max"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",j,"."]}),(null==d?void 0:d.type)==="min"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",f,"."]})]})}},1240:function(){}},function(e){e.O(0,[8447,6990,2750,5869,1865,341,2710,2971,2472,1744],function(){return e(e.s=4671)}),_N_E=e.O()}]);