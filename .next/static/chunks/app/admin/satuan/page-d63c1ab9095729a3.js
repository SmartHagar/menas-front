(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6918],{8502:function(a,t,e){Promise.resolve().then(e.bind(e,5421))},5421:function(a,t,e){"use strict";e.r(t),e.d(t,{default:function(){return N}});var s=e(7437),r=e(2265),n=e(2230),l=e(3423),d=e(3842),i=e(4660),u=e(4810),o=e(8875),c=e(5967);let h=(0,i.Ue)((0,u.mW)((a,t)=>({dtSatuan:[],setSatuan:async t=>{let{page:e=1,limit:s=10,search:r,sortby:n,order:l}=t;try{let t=await c.Z.getState().setToken(),d=await (0,o.Sj)({method:"get",url:"/satuan",headers:{Authorization:"Bearer ".concat(t)},params:{limit:s,page:e,search:r,sortby:n,order:l}});return a(a=>({...a,dtSatuan:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowSatuan:async t=>{try{let e=await c.Z.getState().setToken(),s=await (0,o.Sj)({method:"get",url:"/satuan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({...a,dtSatuan:s.data.data})),{status:"berhasil",data:s.data}}catch(a){var e;return{status:"error",error:null===(e=a.response)||void 0===e?void 0:e.data}}},addData:async t=>{try{let e=await c.Z.getState().setToken(),s=await (0,o.Sj)({method:"post",url:"/satuan",headers:{Authorization:"Bearer ".concat(e)},data:t});return a(a=>({dtSatuan:{last_page:a.dtSatuan.last_page,current_page:a.dtSatuan.current_page,data:[s.data.data,...a.dtSatuan.data]}})),{status:"berhasil tambah",data:s.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async t=>{try{let e=await c.Z.getState().setToken(),s=await (0,o.Sj)({method:"delete",url:"/satuan/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({dtSatuan:{last_page:a.dtSatuan.last_page,current_page:a.dtSatuan.current_page,data:a.dtSatuan.data.filter(a=>a.id!==t)}})),{status:"berhasil hapus",data:s.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,e)=>{try{let s=await c.Z.getState().setToken(),r=await (0,o.Sj)({method:"PUT",url:"/satuan/".concat(t),headers:{Authorization:"Bearer ".concat(s)},data:e});return a(a=>({dtSatuan:{last_page:a.dtSatuan.last_page,current_page:a.dtSatuan.current_page,data:a.dtSatuan.data.map(a=>a.id===t?{...a,...r.data.data}:a)}})),{status:"berhasil update",data:r.data}}catch(a){return{status:"error",data:a.response.data}}}})));var m=e(4033),x=a=>{let{setDelete:t,setEdit:e,search:i}=a,{setSatuan:u,dtSatuan:o}=h(),[c,x]=(0,r.useState)(1),[p,g]=(0,r.useState)(10),[S,j]=(0,r.useState)(!0),f=(0,m.useSearchParams)(),v=f.get("sortby")||"",b=f.get("order")||"",w=async()=>{await u({page:c,limit:p,search:i,sortby:v,order:b}),j(!1)};return(0,r.useEffect)(()=>(w(),()=>{}),[c,p]),(0,r.useEffect)(()=>{x(1),w()},[i,v,b]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:S?(0,s.jsx)(n.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(d.Z,{headTable:["No","Nama Satuan","Aksi"],tableBodies:["nama"],dataTable:o.data,page:c,limit:p,setEdit:e,setDelete:t,ubah:!0,hapus:!0})}),(null==o?void 0:o.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(l.Z,{currentPage:null==o?void 0:o.current_page,totalPages:null==o?void 0:o.last_page,setPage:x})})]})})},p=e(5782),g=e(8963),S=e(311),j=e(1865);e(1240);var f=a=>{let{register:t,errors:e,control:r,dtEdit:n,watch:l,setValue:d,showModal:i}=a;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Z,{label:"Nama Satuan",name:"nama",register:t,required:!0,minLength:2,errors:e.nama,addClass:"col-span-4"})})},v=e(8528),b=a=>{let{showModal:t,setShowModal:e,dtEdit:n}=a,{addData:l,updateData:d}=h(),{register:i,handleSubmit:u,setValue:o,control:c,formState:{errors:m},watch:x}=(0,j.cI)(),b=()=>{o("id",""),o("nama","")};(0,r.useEffect)(()=>{n?(o("id",n.id),o("nama",n.nama)):b()},[t,n]);let w=async a=>{if(console.log({row:a}),n){let{data:t}=await d(n.id,a);(0,S.Z)({event:t}),e(!1)}else{let{data:t}=await l(a);console.log({data:t}),(0,S.Z)({event:t}),(null==t?void 0:t.type)!=="success"||b()}};return(0,s.jsx)(g.Z,{title:"Form Satuan",showModal:t,setShowModal:e,children:(0,s.jsxs)("form",{onSubmit:u(w),children:[(0,s.jsx)(p.Z,{name:"id",register:i,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(f,{register:i,errors:m,dtEdit:n,control:c,watch:x,setValue:o,showModal:t})}),(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{onClick:u(w),children:"Simpan"})})]})})},w=e(3015),y=e(5925),k=e(4123),N=()=>{let{removeData:a}=h(),[t,e]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!1),[d,i]=(0,r.useState)(),[u,o]=(0,r.useState)(),[c,m]=(0,r.useState)(""),p=async t=>{let{id:e,isDelete:s}=t;if(i(e),s){let{data:t}=await a(d);(0,S.Z)({event:t}),l(!1)}else l(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.x7,{}),(0,s.jsx)(b,{dtEdit:u,showModal:t,setShowModal:e}),(0,s.jsx)(w.Z,{showDel:n,setShowDel:l,setDelete:p}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsx)("p",{children:"Silahkan Mengolah data Satuan"}),(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{onClick:()=>{e(!0),o(null)},children:"Tambah Data"})})]}),(0,s.jsx)(k.Z,{placeholder:"Cari Satuan",onChange:a=>m(a)})]}),(0,s.jsx)(x,{setDelete:p,setEdit:a=>{e(!0),o(a)},search:c})]})}},5782:function(a,t,e){"use strict";var s=e(7437);e(2265),t.Z=a=>{let{label:t,register:e,required:r,name:n,minLength:l,maxLength:d,errors:i,valueAsNumber:u,type:o="text",readOnly:c,placeholder:h,autoComplete:m="on",addClass:x,value:p,defaultValue:g,max:S,min:j,step:f}=a;return(0,s.jsxs)("div",{className:x,children:[(0,s.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:o,id:n,readOnly:c,placeholder:h,autoComplete:m,...e(n,{required:r,minLength:l,maxLength:d,valueAsNumber:u,max:S,min:j,step:f}),defaultValue:g,value:p})}),(null==i?void 0:i.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==i?void 0:i.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==i?void 0:i.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",d," karakter"]}),(null==i?void 0:i.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]}),(null==i?void 0:i.type)==="max"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",S,"."]}),(null==i?void 0:i.type)==="min"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",j,"."]})]})}},1240:function(){}},function(a){a.O(0,[8447,6990,2750,5869,1865,341,2710,2971,2472,1744],function(){return a(a.s=8502)}),_N_E=a.O()}]);