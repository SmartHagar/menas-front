(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7005],{5258:function(a,e,t){Promise.resolve().then(t.bind(t,3251))},3251:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return h}});var r=t(7437),s=t(2265),n=t(2230),l=t(3423),c=t(3842),d=t(5260),o=a=>{let{search:e}=a,{setObatMasuk:t,dtObatMasuk:o}=(0,d.Z)(),[i,u]=(0,s.useState)(1),[h,p]=(0,s.useState)(10),[b,m]=(0,s.useState)(!0),x=async()=>{await t({page:i,limit:h,search:e}),m(!1)};return(0,s.useEffect)(()=>(x(),()=>{}),[i,h]),(0,s.useEffect)(()=>{u(1),x()},[e]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:b?(0,r.jsx)(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(c.Z,{headTable:["No","Nama Obat","Jumlah","Layanan","Tgl. Masuk","Tgl. Kadaluarsa","Aksi"],tableBodies:["obat.nm_obat","jumlah","layanan","tgl_masuk","tgl_kadaluarsa"],dataTable:o.data,page:i,limit:h,ubah:!0,hapus:!0})}),(null==o?void 0:o.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.Z,{currentPage:null==o?void 0:o.current_page,totalPages:null==o?void 0:o.last_page,setPage:u})})]})})},i=t(5925),u=t(4123),h=()=>{let[a,e]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.x7,{}),(0,r.jsx)("div",{className:"mb-4 flex justify-between",children:(0,r.jsx)("p",{children:"Silahkan Mengolah data ObatMasuk"})}),(0,r.jsx)(u.Z,{placeholder:"Cari ObatMasuk",onChange:a=>e(a)})]}),(0,r.jsx)(o,{search:a})]})}},4123:function(a,e,t){"use strict";var r=t(7437);t(2265),e.Z=a=>{let{placeholder:e,addClass:t,onChange:s,defaultValue:n=""}=a;return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",placeholder:e,onChange:a=>{s(a.target.value)},defaultValue:n})})}},2230:function(a,e,t){"use strict";var r=t(7437);t(2265),e.Z=()=>(0,r.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-primary border-t-transparent shadow-md"})},3423:function(a,e,t){"use strict";var r=t(7437);t(2265);var s=t(4606);e.Z=a=>{let{totalPages:e,currentPage:t,setPage:n}=a,l=[];if(e<=5)l=Array.from({length:e},(a,e)=>e+1);else{l=[1,t-1,t,t+1,e],l=(l=Array.from(new Set(l)).sort((a,e)=>a-e)).filter(a=>a>0&&a<=e);for(let a=1;a<l.length-1;a++)l[a]-l[a-1]>1&&(l.splice(a,0,"..."),a++);e-l[l.length-2]>1&&l.splice(l.length-1,0,"...")}return(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)("ol",{className:"flex justify-center gap-1 text-xs font-medium",children:[t>1&&(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>n(t-1),className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100",children:(0,r.jsx)(s.pjk,{})})}),l.map((a,e)=>"..."===a?(0,r.jsx)("li",{className:"flex items-end text-xl",children:(0,r.jsx)("div",{className:"block h-8 w-8 rounded border border-gray-100 text-center leading-8",children:a})},e):(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>n(a),className:"cursor-pointer block h-8 w-8 rounded border border-gray-100 text-center leading-8 ".concat(a==t?"bg-blue-900 text-white":""),children:a})},e)),t<e&&(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>n(t+1),className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100",children:(0,r.jsx)(s.fmn,{})})})]})})}},3842:function(a,e,t){"use strict";t.d(e,{Z:function(){return b}});var r=t(7437),s=t(2265),n=t(8875),l=t(6691),c=t.n(l),d=t(2067),o=t.n(d),i=a=>{let e=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"Rp. ".concat(e)},u=(a,e)=>{var t,s,l;null==a||null===(t=a.thn_angkatan)||void 0===t||t.substring(2),null==a||null===(l=a.mhs)||void 0===l||null===(s=l.thn_angkatan)||void 0===s||s.substring(2);let d=e.split(".");if(Array.isArray(d)){let t=d.length>1?d.pop():d,s=d.length,l=1,u=d[0];for(;(a=a[u])&&l<s;)u=d[l],l++;return"object"==typeof a?a?a[t]:"":"tgl_masuk"===e||"tgl_kadaluarsa"===e||"tgl_resep"===e||"tgl_lahir"===e?o()(a).format("DD/MM/YYYY"):"gambar"===e||"foto"===e?a&&(0,r.jsx)(c(),{src:"".concat(n._n,"/").concat(a),width:100,height:100,alt:""}):"harga"===e?i(a):"file"===e?a&&(0,r.jsx)("a",{href:"".concat(n._n,"/").concat(a),target:"_blank",children:"Lihat File"}):(0,r.jsx)("p",{className:"capitalize",children:a})}throw"parts is not valid array"},h=t(4033),p=t(4606),b=a=>{let e=(0,h.useRouter)(),t=(0,h.useSearchParams)(),[n,l]=(0,s.useState)(0),[c,d]=(0,s.useState)(),[o,i]=(0,s.useState)(),b=e=>(a.page-1)*a.limit+e+1,m=t.get("sortby"),x=(a,t)=>{d(a);let r=a===m?n+1:1,s=r%2==0?"desc":"asc";e.push("?sortby=".concat(a,"&order=").concat(s)),l(r),i(s)};return(0,s.useEffect)(()=>{m&&x(m)},[]),(0,r.jsxs)("table",{className:"w-full border-collapse text-left bg-white",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:a.headTable&&a.headTable.map((e,t)=>{let s=a.tableBodies[t-1];return(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 ".concat(!("Aksi"===e||"No"===e)&&"cursor-pointer"),onClick:()=>{!("Aksi"===e||"No"===e)&&m&&x(s,t)},children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[e,c===s&&(0,r.jsxs)("span",{className:"flex",children:[(0,r.jsx)(p.mXI,{className:"".concat("desc"===o&&"hidden")}),(0,r.jsx)(p.S9U,{className:"".concat("asc"===o&&"hidden")})]})]})},t)})})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:a.dataTable&&a.dataTable.map((e,t)=>{let{id:s}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:b(t)}),a.tableBodies.map((a,t)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:u(e,a)},t)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[a.costume&&a.costume(e,t),a.ubah&&(0,r.jsx)(p.Ph1,{onClick:()=>a.setEdit&&(null==a?void 0:a.setEdit(e)),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),a.hapus&&(0,r.jsx)(p.AuQ,{onClick:()=>(null==a?void 0:a.setDelete)&&(null==a?void 0:a.setDelete({id:s,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},t)})})]})}},8875:function(a,e,t){"use strict";t.d(e,{I8:function(){return n},Sj:function(){return l},_n:function(){return s},hi:function(){return c}});var r=t(2173);let s="https://back.menas.ta-uogp.my.id",n=r.Z.create({baseURL:"".concat(s,"/auth")}),l=r.Z.create({baseURL:"".concat(s,"/crud")}),c=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")})},5967:function(a,e,t){"use strict";var r=t(4660),s=t(4810),n=t(8875),l=t(1490);let c=(0,r.Ue)((0,s.mW)((a,e)=>({setToken:async()=>{let a=l.Z.get("token");return a},setLogin:async a=>{try{let e=await (0,n.I8)({method:"post",url:"/login",data:a});return{status:"success",data:e.data}}catch(a){return{status:"error",error:a.response.data}}},cekToken:async()=>{let a=await e().setToken();try{let e=await (0,n.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(a)}});return{status:"success",data:e.data}}catch(a){return{status:"error",error:a.response.data}}}})));e.Z=c},5260:function(a,e,t){"use strict";var r=t(4660),s=t(4810),n=t(8875),l=t(5967);let c=(0,r.Ue)((0,s.mW)((a,e)=>({dtObatMasuk:[],setObatMasuk:async e=>{let{page:t=1,limit:r=10,search:s,sortby:c,order:d}=e;try{let e=await l.Z.getState().setToken(),o=await (0,n.Sj)({method:"get",url:"/obatMasuk",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:t,search:s,sortby:c,order:d}});return a(a=>({...a,dtObatMasuk:o.data.data})),{status:"berhasil",data:o.data}}catch(a){var o;return{status:"error",error:null===(o=a.response)||void 0===o?void 0:o.data}}},setShowObatMasuk:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,dtObatMasuk:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"post",url:"/obatMasuk",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:[r.data.data,...a.dtObatMasuk.data]}})),{status:"berhasil tambah",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await l.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:a.dtObatMasuk.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let r=await l.Z.getState().setToken(),s=await (0,n.Sj)({method:"PUT",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(r)},data:t});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:a.dtObatMasuk.data.map(a=>a.id===e?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=c}},function(a){a.O(0,[8447,6990,2750,5869,2971,2472,1744],function(){return a(a.s=5258)}),_N_E=a.O()}]);