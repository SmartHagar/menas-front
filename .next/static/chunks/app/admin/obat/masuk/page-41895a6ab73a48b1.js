(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{9609:function(a,e,t){Promise.resolve().then(t.bind(t,6342))},6342:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var l=t(7437),s=t(2265),r=t(2230),n=t(3423),d=t(3842),i=t(5260),o=a=>{let{setDelete:e,setEdit:t,search:o}=a,{setObatMasuk:u,dtObatMasuk:c}=(0,i.Z)(),[h,m]=(0,s.useState)(1),[x,b]=(0,s.useState)(10),[p,g]=(0,s.useState)(!0),k=async()=>{await u({page:h,limit:x,search:o}),g(!1)};return(0,s.useEffect)(()=>(k(),()=>{}),[h,x]),(0,s.useEffect)(()=>{m(1),k()},[o]),(0,l.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:p?(0,l.jsx)(r.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(d.Z,{headTable:["No","Nama Obat","Jumlah","Layanan","Tgl. Masuk","Tgl. Kadaluarsa","Aksi"],tableBodies:["obat.nm_obat","jumlah","layanan","tgl_masuk","tgl_kadaluarsa"],dataTable:c.data,page:h,limit:x,setEdit:t,setDelete:e,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(n.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:m})})]})})},u=t(5782),c=t(8963),h=t(311),m=t(1865),x=t(9948),b=t(5022),p=t(945),g=t(9065);t(1240);var k=a=>{let{register:e,errors:t,control:r,dtEdit:n,watch:d,setValue:i,showModal:o,tgl_masuk:c,setTgl_masuk:h,tgl_kadaluarsa:m,setTgl_kadaluarsa:k}=a,{setObatAll:v,dtObat:j}=(0,g.Z)(),f=async a=>{let{search:e}=a;await v({search:e})};return(0,s.useEffect)(()=>{f({})},[o]),(0,l.jsxs)(l.Fragment,{children:[(null==j?void 0:j.data)&&(0,l.jsx)(p.Z,{label:"Obat",placeholder:"Pilih Obat",name:"obat_id",dataDb:null==j?void 0:j.data,body:["id","nm_obat"],control:r,required:!0,errors:t.obat_id,addClass:"col-span-4"}),(0,l.jsx)(u.Z,{label:"Jumlah",name:"jumlah",register:e,required:!0,type:"number",errors:t.jumlah,addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(b.u,{label:"Layanan",defaultOption:"Pilih Layanan",register:e,errors:t,name:"layanan",options:[{value:"IFK",label:"IFK"},{value:"BPJS",label:"BPJS"},{value:"Dll",label:"Dll"}],addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(x.Z,{label:"Tgl. Masuk",name:"tgl_masuk",control:r,startDate:c,setStartDate:h,required:!0,errors:t.tgl_masuk,addClass:"col-span-4 lg:col-span-2"}),(0,l.jsx)(x.Z,{label:"Tgl. Kadaluarsa",name:"tgl_kadaluarsa",control:r,startDate:m,setStartDate:k,required:!0,errors:t.tgl_kadaluarsa,addClass:"col-span-4 lg:col-span-2"})]})},v=t(8528),j=a=>{let{showModal:e,setShowModal:t,dtEdit:r}=a,{addData:n,updateData:d}=(0,i.Z)(),[o,x]=(0,s.useState)(new Date),[b,p]=(0,s.useState)(),{register:g,handleSubmit:j,setValue:f,control:y,formState:{errors:w},watch:_}=(0,m.cI)(),M=()=>{f("id",""),f("obat_id",""),f("jumlah",""),f("tgl_masuk",""),x(""),p(""),f("tgl_kadaluarsa",""),f("layanan","")};(0,s.useEffect)(()=>{r?(f("id",r.id),f("obat_id",r.obat_id),f("jumlah",r.jumlah),f("tgl_masuk",r.tgl_masuk),x(new Date(r.tgl_masuk)),p(new Date(r.tgl_kadaluarsa)),f("tgl_kadaluarsa",r.tgl_kadaluarsa),f("layanan",r.layanan)):M()},[e,r]);let N=async a=>{if(console.log({row:a}),r){let{data:e}=await d(r.id,a);(0,h.Z)({event:e}),t(!1)}else{let{data:e}=await n(a);console.log({data:e}),(0,h.Z)({event:e}),(null==e?void 0:e.type)!=="success"||M()}};return(0,l.jsx)(c.Z,{title:"Form ObatMasuk",showModal:e,setShowModal:t,children:(0,l.jsxs)("form",{onSubmit:j(N),children:[(0,l.jsx)(u.Z,{name:"id",register:g,type:"hidden"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,l.jsx)(k,{register:g,errors:w,dtEdit:r,control:y,watch:_,setValue:f,showModal:e,tgl_masuk:o,setTgl_masuk:x,tgl_kadaluarsa:b,setTgl_kadaluarsa:p})}),(0,l.jsx)("div",{children:(0,l.jsx)(v.Z,{onClick:j(N),children:"Simpan"})})]})})},f=t(3015),y=t(5925),w=t(4123),_=()=>{let{removeData:a}=(0,i.Z)(),[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1),[d,u]=(0,s.useState)(),[c,m]=(0,s.useState)(),[x,b]=(0,s.useState)(""),p=async e=>{let{id:t,isDelete:l}=e;if(u(t),l){let{data:e}=await a(d);(0,h.Z)({event:e}),n(!1)}else n(!0)};return(0,l.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(y.x7,{}),(0,l.jsx)(j,{dtEdit:c,showModal:e,setShowModal:t}),(0,l.jsx)(f.Z,{showDel:r,setShowDel:n,setDelete:p}),(0,l.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,l.jsx)("p",{children:"Silahkan Mengolah data ObatMasuk"}),(0,l.jsx)("div",{children:(0,l.jsx)(v.Z,{onClick:()=>{t(!0),m(null)},children:"Tambah Data"})})]}),(0,l.jsx)(w.Z,{placeholder:"Cari ObatMasuk",onChange:a=>b(a)})]}),(0,l.jsx)(o,{setDelete:p,setEdit:a=>{t(!0),m(a)},search:x})]})}},9948:function(a,e,t){"use strict";var l=t(7437);t(2265);var s=t(1865),r=t(2218),n=t.n(r),d=t(2067),i=t.n(d);e.Z=a=>{let{control:e,required:t,name:r,errors:d,addClass:o,label:u,startDate:c,setStartDate:h}=a;return(0,l.jsxs)("div",{className:o,children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[u,t&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,l.jsx)(s.Qr,{name:r,control:e,rules:{required:t},render:a=>{let{field:e}=a;return(0,l.jsx)(n(),{selected:c,onChange:a=>{if(a){h(a);let t=i()(a).format("YYYY-MM-DD");e.onChange(t)}else h(null),e.onChange("")},dateFormat:"dd/MM/yyyy",value:c||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4"})}}),(null==d?void 0:d.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[u," tidak boleh kosong"]})]})}},5782:function(a,e,t){"use strict";var l=t(7437);t(2265),e.Z=a=>{let{label:e,register:t,required:s,name:r,minLength:n,maxLength:d,errors:i,valueAsNumber:o,type:u="text",readOnly:c,placeholder:h,autoComplete:m="on",addClass:x,value:b,defaultValue:p,max:g,min:k,step:v}=a;return(0,l.jsxs)("div",{className:x,children:[(0,l.jsx)("label",{htmlFor:r,className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),s&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:u,id:r,readOnly:c,placeholder:h,autoComplete:m,...t(r,{required:s,minLength:n,maxLength:d,valueAsNumber:o,max:g,min:k,step:v}),defaultValue:p,value:b})}),(null==i?void 0:i.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kosong"]}),(null==i?void 0:i.type)==="minLength"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",n," karakter"]}),(null==i?void 0:i.type)==="maxLength"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",d," karakter"]}),(null==i?void 0:i.type)==="pattern"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," hanya boleh angka."]}),(null==i?void 0:i.type)==="max"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",g,"."]}),(null==i?void 0:i.type)==="min"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",k,"."]})]})}},5022:function(a,e,t){"use strict";t.d(e,{u:function(){return s}});var l=t(7437);t(2265);let s=a=>{let{label:e,register:t,required:s,name:r,placeholder:n,defaultOption:d,options:i=[],errors:o,addClass:u}=a;return(0,l.jsxs)("div",{className:u,children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),s&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:e,placeholder:n,...t(r,{required:s}),children:[(0,l.jsx)("option",{value:"",children:d}),i.map((a,e)=>(0,l.jsx)("option",{value:a.value,children:a.label},e))]})}),(null==o?void 0:o.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kosong"]})]})}},945:function(a,e,t){"use strict";var l=t(7437);t(2265);var s=t(4229),r=t(1865);e.Z=a=>{let{dataDb:e,body:t,control:n,required:d,name:i,errors:o,placeholder:u,addClass:c,label:h,defaultOptions:m=!0}=a,x={multiValue:(a,e)=>e.data.isFixed?{...a,backgroundColor:"gray"}:a,multiValueLabel:(a,e)=>e.data.isFixed?{...a,fontWeight:"bold",color:"white",paddingRight:6}:a,multiValueRemove:(a,e)=>e.data.isFixed?{...a,display:"none"}:a},b=(a,e)=>{let t=a[e];if("id"===e)return{value:t,label:""};if(!e.includes("."))return{value:"",label:t};{let[t,...l]=e.split("."),s=a[t];return b(s,l.join("."))}},p=()=>{let a=e&&e.map((a,e)=>{let l=t.map(e=>b(a,e)),s=l.map(a=>a.label).filter(a=>""!==a),r=s.join(s.length>1?" - ":"");return{value:l.find(a=>""!==a.value).value,label:r}});return a},g=a=>{var e;return null===(e=p())||void 0===e?void 0:e.filter(e=>e.label.toLowerCase().includes(a.toLowerCase()))},k=(a,e)=>{setTimeout(()=>{e(g(a))},1e3)};return(0,l.jsxs)("div",{className:c,children:[h&&(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:h}),d&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)(r.Qr,{name:i,control:n,rules:{required:d},render:a=>{var e;let{field:{onChange:t,value:r,ref:n}}=a;return(0,l.jsx)(s.Z,{cacheOptions:!0,defaultOptions:m,isClearable:!0,isSearchable:!0,loadOptions:k,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",styles:x,ref:n,value:(null===(e=p())||void 0===e?void 0:e.find(a=>a.value===r))||null,onChange:a=>t(a?a.value:a)})}}),(null==o?void 0:o.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[h," tidak boleh kosong"]})]})}},9065:function(a,e,t){"use strict";var l=t(4660),s=t(4810),r=t(8875);let n=(0,l.Ue)((0,s.mW)((a,e)=>({dtObat:[],setObat:async e=>{let{page:t=1,limit:l=10,search:s}=e;try{let e=await (0,r.hi)({method:"get",url:"/obat",params:{limit:l,page:t,search:s}});return a(a=>({...a,dtObat:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}},setObatAll:async e=>{let{search:t}=e;try{let e=await (0,r.hi)({method:"get",url:"/obat/all",params:{search:t}});return a(a=>({...a,dtObat:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}}})));e.Z=n},5260:function(a,e,t){"use strict";var l=t(4660),s=t(4810),r=t(8875),n=t(5967);let d=(0,l.Ue)((0,s.mW)((a,e)=>({dtObatMasuk:[],setObatMasuk:async e=>{let{page:t=1,limit:l=10,search:s,sortby:d,order:i}=e;try{let e=await n.Z.getState().setToken(),o=await (0,r.Sj)({method:"get",url:"/obatMasuk",headers:{Authorization:"Bearer ".concat(e)},params:{limit:l,page:t,search:s,sortby:d,order:i}});return a(a=>({...a,dtObatMasuk:o.data.data})),{status:"berhasil",data:o.data}}catch(a){var o;return{status:"error",error:null===(o=a.response)||void 0===o?void 0:o.data}}},setShowObatMasuk:async e=>{try{let t=await n.Z.getState().setToken(),l=await (0,r.Sj)({method:"get",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,dtObatMasuk:l.data.data})),{status:"berhasil",data:l.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await n.Z.getState().setToken(),l=await (0,r.Sj)({method:"post",url:"/obatMasuk",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:[l.data.data,...a.dtObatMasuk.data]}})),{status:"berhasil tambah",data:l.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await n.Z.getState().setToken(),l=await (0,r.Sj)({method:"delete",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:a.dtObatMasuk.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:l.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let l=await n.Z.getState().setToken(),s=await (0,r.Sj)({method:"PUT",url:"/obatMasuk/".concat(e),headers:{Authorization:"Bearer ".concat(l)},data:t});return a(a=>({dtObatMasuk:{last_page:a.dtObatMasuk.last_page,current_page:a.dtObatMasuk.current_page,data:a.dtObatMasuk.data.map(a=>a.id===e?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));e.Z=d}},function(a){a.O(0,[8447,6990,2750,5869,1865,341,5177,4229,2710,2971,2472,1744],function(){return a(a.s=9609)}),_N_E=a.O()}]);