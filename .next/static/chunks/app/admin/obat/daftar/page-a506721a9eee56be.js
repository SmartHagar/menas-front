(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2387],{2507:function(a,e,t){Promise.resolve().then(t.bind(t,2095))},2095:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return D}});var r=t(7437),s=t(2265),l=t(2230),n=t(3423),d=t(3842),i=t(4660),o=t(4810),u=t(8875),c=t(5967);let h=(0,i.Ue)((0,o.mW)((a,e)=>({setFormData:a=>{let e=new FormData;return e.append("jenis_id",a.jenis_id),e.append("nama",a.nama),e.append("satuan",a.satuan),e.append("gambar",a.gambar),e},dtObat:[],showObat:[],setObat:async e=>{let{page:t=1,limit:r=10,search:s,sortby:l,order:n}=e;try{let e=await c.Z.getState().setToken(),d=await (0,u.Sj)({method:"get",url:"/obat",headers:{Authorization:"Bearer ".concat(e)},params:{limit:r,page:t,search:s,sortby:l,order:n}});return a(a=>({...a,dtObat:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowObat:async e=>{try{let t=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"get",url:"/obat/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return console.log({response:r}),a(a=>({...a,showObat:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async t=>{let r=(null==t?void 0:t.gambar)?e().setFormData(t):t;try{let e=await c.Z.getState().setToken(),t=await (0,u.Sj)({method:"post",url:"/obat",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"},data:r});return a(a=>({dtObat:{last_page:a.dtObat.last_page,current_page:a.dtObat.current_page,data:[t.data.data,...a.dtObat.data]}})),{status:"berhasil tambah",data:t.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await c.Z.getState().setToken(),r=await (0,u.Sj)({method:"delete",url:"/obat/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtObat:{last_page:a.dtObat.last_page,current_page:a.dtObat.current_page,data:a.dtObat.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,r)=>{delete r.id;let s=(null==r?void 0:r.gambar)?e().setFormData(r):r,l=await c.Z.getState().setToken();try{let e=await (0,u.Sj)({url:"/obat/".concat(t),method:"post",headers:(null==r?void 0:r.gambar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(l)}:{Authorization:"Bearer ".concat(l)},data:s,params:{_method:"PUT"}});return a(a=>({dtObat:{last_page:a.dtObat.last_page,current_page:a.dtObat.current_page,data:a.dtObat.data.map(a=>a.id===t?{...a,...e.data.data}:a)}})),{status:"berhasil update",data:e.data}}catch(a){return{status:"error",data:a.response.data}}}})));var m=t(4033),p=a=>{let{setDelete:e,setEdit:t}=a,{setObat:i,dtObat:o,setShowObat:u,showObat:c}=h(),[p,x]=(0,s.useState)(1),[b,g]=(0,s.useState)(10),[j,v]=(0,s.useState)(!0),[f,y]=(0,s.useState)(0),w=(0,m.useSearchParams)(),k=w.get("sortby")||"",_=w.get("order")||"",S=w.get("search")||"",N=async()=>{await i({page:p,limit:b,search:S,sortby:k,order:_}),v(!1)};return(0,s.useEffect)(()=>(N(),()=>{}),[p,b,w]),(0,s.useEffect)(()=>{x(1),N()},[S,w]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full grow overflow-auto",children:j?(0,r.jsx)(l.Z,{}):(0,r.jsxs)("div",{className:"h-1/2",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(d.Z,{headTable:["No","Jenis Obat","Nama","Satuan","Harga","Aksi"],tableBodies:["jenis.nama","nm_obat","satuan.nama","harga"],dataTable:o.data,page:p,limit:b,setEdit:t,setDelete:e,ubah:!0,hapus:!0})}),(null==o?void 0:o.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==o?void 0:o.current_page,totalPages:null==o?void 0:o.last_page,setPage:x})})]})})},x=t(5782),b=t(8963),g=t(311),j=t(1865),v=t(945);let f=(0,i.Ue)((0,o.mW)((a,e)=>({dtJenis:[],setJenis:async e=>{let{page:t=1,limit:r=10,search:s}=e;try{let e=await (0,u.hi)({method:"get",url:"/jenis",params:{limit:r,page:t,search:s}});return a(a=>({...a,dtJenis:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}},setJenisAll:async e=>{let{search:t}=e;try{let e=await (0,u.hi)({method:"get",url:"/jenis/all",params:{search:t}});return a(a=>({...a,dtJenis:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}}})));t(1240);let y=(0,i.Ue)((0,o.mW)((a,e)=>({dtSatuan:[],setSatuan:async e=>{let{page:t=1,limit:r=10,search:s}=e;try{let e=await (0,u.hi)({method:"get",url:"/satuan",params:{limit:r,page:t,search:s}});return a(a=>({...a,dtSatuan:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}},setSatuanAll:async e=>{let{search:t}=e;try{let e=await (0,u.hi)({method:"get",url:"/satuan/all",params:{search:t}});return a(a=>({...a,dtSatuan:e.data})),{status:"berhasil",data:e.data}}catch(a){return{status:"error",error:a.response.data}}}})));var w=t(6750),k=a=>{let{label:e,required:t,name:s,minLength:l,maxLength:n,errors:d,control:i,addClass:o}=a;return(0,r.jsxs)("div",{className:o,children:[(0,r.jsx)("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),t&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(j.Qr,{name:s,control:i,rules:{required:t},render:a=>{let{field:e}=a;return(0,r.jsx)(w.h3,{id:s,type:"text",autoComplete:"off",thousandSeparator:",",prefix:"Rp. ",value:e.value,onValueChange:(a,t)=>{console.log(a,t),e.onChange(a.floatValue||"")},className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary"})}})}),(null==d?void 0:d.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",l," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",n," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," hanya boleh angka."]})]})},_=a=>{let{register:e,errors:t,control:l,dtEdit:n,watch:d,setValue:i,showModal:o}=a,{setJenisAll:u,dtJenis:c}=f(),{setSatuanAll:h,dtSatuan:m}=y(),p=async a=>{let{search:e}=a;await u({search:e}),await h({search:e})};return(0,s.useEffect)(()=>{p({})},[o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{label:"Nama Obat",name:"nm_obat",register:e,required:!0,minLength:3,errors:t.nm_obat,addClass:"col-span-4"}),(null==c?void 0:c.data)&&(0,r.jsx)(v.Z,{label:"Jenis",placeholder:"Pilih Jenis",name:"jenis_id",dataDb:null==c?void 0:c.data,body:["id","nama"],control:l,required:!0,errors:t.jenis_id,addClass:"col-span-4 lg:col-span-2"}),(null==m?void 0:m.data)&&(0,r.jsx)(v.Z,{label:"Satuan",placeholder:"Pilih Satuan",name:"satuan_id",dataDb:null==m?void 0:m.data,body:["id","nama"],control:l,required:!0,errors:t.satuan_id,addClass:"col-span-4 lg:col-span-2"}),(0,r.jsx)(k,{label:"Harga Obat",name:"harga",control:l,required:!0,errors:t.harga,addClass:"col-span-4"})]})},S=t(8528),N=a=>{let{showModal:e,setShowModal:t,dtEdit:l}=a,{addData:n,updateData:d}=h(),{register:i,handleSubmit:o,setValue:u,control:c,formState:{errors:m},watch:p}=(0,j.cI)(),v=()=>{u("id",""),u("jenis_id",""),u("nm_obat",""),u("satuan_id",""),u("harga","")};(0,s.useEffect)(()=>{l?(u("id",l.id),u("jenis_id",l.jenis_id),u("nm_obat",l.nm_obat),u("satuan_id",l.satuan_id),u("harga",l.harga)):v()},[e,l]);let f=async a=>{if(console.log({row:a}),l){let{data:e}=await d(l.id,a);(0,g.Z)({event:e}),t(!1)}else{let{data:e}=await n(a);console.log({data:e}),(0,g.Z)({event:e}),(null==e?void 0:e.type)!=="success"||v()}};return(0,r.jsx)(b.Z,{title:"Form Obat",showModal:e,setShowModal:t,children:(0,r.jsxs)("form",{onSubmit:o(f),children:[(0,r.jsx)(x.Z,{name:"id",register:i,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(_,{register:i,errors:m,dtEdit:l,control:c,watch:p,setValue:u,showModal:e})}),(0,r.jsx)("div",{children:(0,r.jsx)(S.Z,{onClick:o(f),children:"Simpan"})})]})})},O=t(3015),Z=t(5925),C=t(4123),D=()=>{let{removeData:a}=h(),[e,t]=(0,s.useState)(!1),[l,n]=(0,s.useState)(!1),[d,i]=(0,s.useState)(),[o,u]=(0,s.useState)(),c=(0,m.useRouter)(),x=(0,m.useSearchParams)(),b=async e=>{let{id:t,isDelete:r}=e;if(i(t),r){let{data:e}=await a(d);(0,g.Z)({event:e}),n(!1)}else n(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(Z.x7,{}),(0,r.jsx)(N,{dtEdit:o,showModal:e,setShowModal:t}),(0,r.jsx)(O.Z,{showDel:l,setShowDel:n,setDelete:b}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Obat"}),(0,r.jsx)("div",{children:(0,r.jsx)(S.Z,{onClick:()=>{t(!0),u(null)},children:"Tambah Data"})})]}),(0,r.jsx)(C.Z,{placeholder:"Cari Obat",onChange:a=>{let e=x.get("sortby")||"",t=x.get("order")||"";c.push("?search=".concat(a,"&sortby=").concat(e,"&order=").concat(t))}})]}),(0,r.jsx)(p,{setDelete:b,setEdit:a=>{t(!0),u(a)}})]})}},5782:function(a,e,t){"use strict";var r=t(7437);t(2265),e.Z=a=>{let{label:e,register:t,required:s,name:l,minLength:n,maxLength:d,errors:i,valueAsNumber:o,type:u="text",readOnly:c,placeholder:h,autoComplete:m="on",addClass:p,value:x,defaultValue:b,max:g,min:j,step:v}=a;return(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:u,id:l,readOnly:c,placeholder:h,autoComplete:m,...t(l,{required:s,minLength:n,maxLength:d,valueAsNumber:o,max:g,min:j,step:v}),defaultValue:b,value:x})}),(null==i?void 0:i.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kosong"]}),(null==i?void 0:i.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",n," karakter"]}),(null==i?void 0:i.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",d," karakter"]}),(null==i?void 0:i.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," hanya boleh angka."]}),(null==i?void 0:i.type)==="max"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",g,"."]}),(null==i?void 0:i.type)==="min"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",j,"."]})]})}},945:function(a,e,t){"use strict";var r=t(7437);t(2265);var s=t(4229),l=t(1865);e.Z=a=>{let{dataDb:e,body:t,control:n,required:d,name:i,errors:o,placeholder:u,addClass:c,label:h,defaultOptions:m=!0}=a,p={multiValue:(a,e)=>e.data.isFixed?{...a,backgroundColor:"gray"}:a,multiValueLabel:(a,e)=>e.data.isFixed?{...a,fontWeight:"bold",color:"white",paddingRight:6}:a,multiValueRemove:(a,e)=>e.data.isFixed?{...a,display:"none"}:a},x=(a,e)=>{let t=a[e];if("id"===e)return{value:t,label:""};if(!e.includes("."))return{value:"",label:t};{let[t,...r]=e.split("."),s=a[t];return x(s,r.join("."))}},b=()=>{let a=e&&e.map((a,e)=>{let r=t.map(e=>x(a,e)),s=r.map(a=>a.label).filter(a=>""!==a),l=s.join(s.length>1?" - ":"");return{value:r.find(a=>""!==a.value).value,label:l}});return a},g=a=>{var e;return null===(e=b())||void 0===e?void 0:e.filter(e=>e.label.toLowerCase().includes(a.toLowerCase()))},j=(a,e)=>{setTimeout(()=>{e(g(a))},1e3)};return(0,r.jsxs)("div",{className:c,children:[h&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:h}),d&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(l.Qr,{name:i,control:n,rules:{required:d},render:a=>{var e;let{field:{onChange:t,value:l,ref:n}}=a;return(0,r.jsx)(s.Z,{cacheOptions:!0,defaultOptions:m,isClearable:!0,isSearchable:!0,loadOptions:j,placeholder:u,menuPlacement:"auto",menuPosition:"fixed",styles:p,ref:n,value:(null===(e=b())||void 0===e?void 0:e.find(a=>a.value===l))||null,onChange:a=>t(a?a.value:a)})}}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[h," tidak boleh kosong"]})]})}}},function(a){a.O(0,[8447,6990,2750,5869,1865,341,4229,8803,2710,2971,2472,1744],function(){return a(a.s=2507)}),_N_E=a.O()}]);