(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1905],{6028:function(e,a,t){Promise.resolve().then(t.bind(t,6774))},6774:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return A}});var s=t(7437),r=t(2265),l=t(2230),n=t(3423),i=t(3842),d=t(4660),o=t(4810),c=t(8875),u=t(5967);let h=(0,d.Ue)((0,o.mW)((e,a)=>({dtPasien:[],setPasien:async a=>{let{page:t=1,limit:s=10,search:r,sortby:l,order:n}=a;try{let a=await u.Z.getState().setToken(),i=await (0,c.Sj)({method:"get",url:"/pasien",headers:{Authorization:"Bearer ".concat(a)},params:{limit:s,page:t,search:r,sortby:l,order:n}});return e(e=>({...e,dtPasien:i.data.data})),{status:"berhasil",data:i.data}}catch(e){var i;return{status:"error",error:null===(i=e.response)||void 0===i?void 0:i.data}}},setShowPasien:async a=>{try{let t=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"get",url:"/pasien/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({...e,dtPasien:s.data.data})),{status:"berhasil",data:s.data}}catch(e){var t;return{status:"error",error:null===(t=e.response)||void 0===t?void 0:t.data}}},addData:async a=>{try{let t=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"post",url:"/pasien",headers:{Authorization:"Bearer ".concat(t)},data:a});return e(e=>({dtPasien:{last_page:e.dtPasien.last_page,current_page:e.dtPasien.current_page,data:[s.data.data,...e.dtPasien.data]}})),{status:"berhasil tambah",data:s.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async a=>{try{let t=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"delete",url:"/pasien/".concat(a),headers:{Authorization:"Bearer ".concat(t)}});return e(e=>({dtPasien:{last_page:e.dtPasien.last_page,current_page:e.dtPasien.current_page,data:e.dtPasien.data.filter(e=>e.id!==a)}})),{status:"berhasil hapus",data:s.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(a,t)=>{try{let s=await u.Z.getState().setToken(),r=await (0,c.Sj)({method:"PUT",url:"/pasien/".concat(a),headers:{Authorization:"Bearer ".concat(s)},data:t});return e(e=>({dtPasien:{last_page:e.dtPasien.last_page,current_page:e.dtPasien.current_page,data:e.dtPasien.data.map(e=>e.id===a?{...e,...r.data.data}:e)}})),{status:"berhasil update",data:r.data}}catch(e){return{status:"error",data:e.response.data}}}})));var m=t(4033),p=e=>{let{setDelete:a,setEdit:t}=e,{setPasien:d,dtPasien:o}=h(),[c,u]=(0,r.useState)(1),[p,x]=(0,r.useState)(10),[g,j]=(0,r.useState)(!0),[f,v]=(0,r.useState)(0),k=(0,m.useSearchParams)(),y=k.get("sortby")||"",b=k.get("order")||"",w=k.get("search")||"",_=async()=>{await d({page:c,limit:p,search:w,sortby:y,order:b}),j(!1)};return(0,r.useEffect)(()=>(_(),()=>{}),[c,p,k]),(0,r.useEffect)(()=>{u(1),_()},[w,k]),(0,s.jsx)("div",{className:"flex-1 flex-col max-w-full h-full grow overflow-auto",children:g?(0,s.jsx)(l.Z,{}):(0,s.jsxs)("div",{className:"h-1/2",children:[(0,s.jsx)("div",{className:"",children:(0,s.jsx)(i.Z,{headTable:["No","Nama Pasien","Tgl. Lahir","Jenkel","No. HP","Alamat","Aksi"],tableBodies:["nm_pasien","tgl_lahir","jenkel","no_hp","alamat"],dataTable:o.data,page:c,limit:p,setEdit:t,setDelete:a,ubah:!0,hapus:!0})}),(null==o?void 0:o.last_page)>1&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.Z,{currentPage:null==o?void 0:o.current_page,totalPages:null==o?void 0:o.last_page,setPage:u})})]})})},x=t(5782),g=t(8963),j=t(311),f=t(1865);t(1240);var v=e=>{let{value:a,register:t,required:r,name:l,defaultChecked:n,id:i,errors:d}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-1 items-start",children:[(0,s.jsx)("input",{type:"radio",value:a,id:i.toString(),name:l,...t(l,{required:r}),className:"form-radio h-4 w-4 text-primary",defaultChecked:n}),(0,s.jsx)("label",{htmlFor:i.toString(),children:a})]}),(null==d?void 0:d.type)==="required"&&(0,s.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tidak boleh kosong"})]})},k=t(2218),y=t.n(k),b=t(2067),w=t.n(b),_=e=>{let{control:a,required:t,name:r,errors:l,addClass:n,label:i,startDate:d,setStartDate:o,minDate:c,maxDate:u}=e;return(0,s.jsxs)("div",{className:n,children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[i,t&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,s.jsx)(f.Qr,{name:r,control:a,rules:{required:t},render:e=>{let{field:a}=e;return(0,s.jsx)(y(),{selected:d,onChange:e=>{if(e){o(e);let t=w()(e).format("YYYY-MM-DD");a.onChange(t)}else o(null),a.onChange("")},dateFormat:"dd/MM/yyyy",value:d||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4 bg-white",placeholderText:"dd/mm/yyyy",minDate:c,maxDate:u})}}),(null==l?void 0:l.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[i," tidak boleh kosong"]})]})},N=t(6137),P=t(8501),S=t(8623),Z=t(8125),D=t(3314),C=e=>{var a;let{register:t,errors:l,control:n,dtEdit:i,watch:d,setValue:o,showModal:c,tgl_lahir:u,setTgl_lahir:h}=e,[m,p]=(0,r.useState)(""),g=d("tgl_lahir"),j=e=>{let a=new Date(e),t=new Date,s=(0,D.Z)(t,a),r=(0,Z.Z)(t,(0,P.Z)(a,s)),l=(0,S.Z)(t,(0,N.Z)((0,P.Z)(a,s),r));console.log({umurTahun:s,umurBulan:r,umurHari:l}),p("".concat(s," Thn, ").concat(r," Bln, ").concat(l," Hri"))};return(0,r.useEffect)(()=>(g?j(g):p(""),()=>{}),[g]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{label:"Nama Pasien",name:"nm_pasien",register:t,required:!0,minLength:3,errors:l.nm_pasien,addClass:"col-span-4"}),(0,s.jsxs)("div",{className:"flex col-span-4 items-center gap-2",children:[(0,s.jsx)(_,{label:"Tgl. Lahir",name:"tgl_lahir",control:n,startDate:u,setStartDate:h,required:!0,errors:l.tgl_lahir,addClass:"col-span-4 lg:col-span-2",maxDate:new Date().setDate(new Date().getDate()-2)}),m&&(0,s.jsx)("span",{children:m})]}),(0,s.jsx)("div",{className:"col-span-4 lg:col-span-2",children:(0,s.jsxs)("div",{className:"w-[100%]",children:[(0,s.jsx)("label",{className:"block py-2 text-sm font-medium text-gray-700 tracking-wide",children:"Jenis Kelamin"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(v,{id:"Laki-laki",name:"jenkel",value:"Laki-laki",register:t,required:!0,defaultChecked:(null==i?void 0:i.jenkel)==="Laki-laki"}),(0,s.jsx)(v,{id:"Perempuan",name:"jenkel",value:"Perempuan",register:t,required:!0,defaultChecked:(null==i?void 0:i.jenkel)==="Perempuan"})]}),(null==l?void 0:null===(a=l.jenkel)||void 0===a?void 0:a.type)==="required"&&(0,s.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Jenis kelamin tidak boleh kosong"})]})}),(0,s.jsx)(x.Z,{label:"No. HP",name:"no_hp",register:t,required:!0,minLength:3,errors:l.no_hp,addClass:"col-span-4"}),(0,s.jsx)(x.Z,{label:"Alamat",name:"alamat",register:t,required:!0,minLength:3,errors:l.alamat,addClass:"col-span-4"})]})},T=t(8528),M=e=>{let{showModal:a,setShowModal:t,dtEdit:l}=e,{addData:n,updateData:i}=h(),[d,o]=(0,r.useState)(""),{register:c,handleSubmit:u,setValue:m,control:p,formState:{errors:v},watch:k}=(0,f.cI)(),y=()=>{m("id",""),m("nm_pasien",""),m("jenkel",""),m("tgl_lahir",""),o(""),m("no_hp",""),m("alamat","")};(0,r.useEffect)(()=>{l?(m("id",l.id),m("nm_pasien",l.nm_pasien),m("jenkel",l.jenkel),m("tgl_lahir",l.tgl_lahir),o(new Date(l.tgl_lahir)),m("no_hp",l.no_hp),m("alamat",l.alamat)):y()},[a,l]);let b=async e=>{if(console.log({row:e}),l){let{data:a}=await i(l.id,e);(0,j.Z)({event:a}),t(!1)}else{let{data:a}=await n(e);console.log({data:a}),(0,j.Z)({event:a}),(null==a?void 0:a.type)!=="success"||y()}};return(0,s.jsx)(g.Z,{title:"Form Pasien",showModal:a,setShowModal:t,children:(0,s.jsxs)("form",{onSubmit:u(b),children:[(0,s.jsx)(x.Z,{name:"id",register:c,type:"hidden"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,s.jsx)(C,{register:c,errors:v,dtEdit:l,control:p,watch:k,setValue:m,showModal:a,tgl_lahir:d,setTgl_lahir:o})}),(0,s.jsx)("div",{children:(0,s.jsx)(T.Z,{type:"submit",onClick:u(b),children:"Simpan"})})]})})},E=t(3015),q=t(5925),L=t(4123),A=()=>{let{removeData:e}=h(),[a,t]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(),[o,c]=(0,r.useState)(),u=(0,m.useRouter)(),x=(0,m.useSearchParams)(),g=async a=>{let{id:t,isDelete:s}=a;if(d(t),s){let{data:a}=await e(i);(0,j.Z)({event:a}),n(!1)}else n(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(q.x7,{}),(0,s.jsx)(M,{dtEdit:o,showModal:a,setShowModal:t}),(0,s.jsx)(E.Z,{showDel:l,setShowDel:n,setDelete:g}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,s.jsx)("p",{children:"Silahkan Mengolah data Pasien"}),(0,s.jsx)("div",{children:(0,s.jsx)(T.Z,{onClick:()=>{t(!0),c(null)},children:"Tambah Data"})})]}),(0,s.jsx)(L.Z,{placeholder:"Cari Pasien",onChange:e=>{let a=x.get("sortby")||"",t=x.get("order")||"";u.push("?search=".concat(e,"&sortby=").concat(a,"&order=").concat(t))}})]}),(0,s.jsx)(p,{setDelete:g,setEdit:e=>{t(!0),c(e)}})]})}},5782:function(e,a,t){"use strict";var s=t(7437);t(2265),a.Z=e=>{let{label:a,register:t,required:r,name:l,minLength:n,maxLength:i,errors:d,valueAsNumber:o,type:c="text",readOnly:u,placeholder:h,autoComplete:m="on",addClass:p,value:x,defaultValue:g,max:j,min:f,step:v}=e;return(0,s.jsxs)("div",{className:p,children:[(0,s.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),r&&(0,s.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",type:c,id:l,readOnly:u,placeholder:h,autoComplete:m,...t(l,{required:r,minLength:n,maxLength:i,valueAsNumber:o,max:j,min:f,step:v}),defaultValue:g,value:x})}),(null==d?void 0:d.type)==="required"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]}),(null==d?void 0:d.type)==="minLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",n," karakter"]}),(null==d?void 0:d.type)==="maxLength"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",i," karakter"]}),(null==d?void 0:d.type)==="pattern"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," hanya boleh angka."]}),(null==d?void 0:d.type)==="max"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh lebih dari ",j,"."]}),(null==d?void 0:d.type)==="min"&&(0,s.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kurang dari ",f,"."]})]})}}},function(e){e.O(0,[8447,6990,2750,5869,1865,341,5177,954,2710,2971,2472,1744],function(){return e(e.s=6028)}),_N_E=e.O()}]);