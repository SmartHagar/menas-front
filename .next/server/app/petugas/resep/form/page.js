(()=>{var e={};e.id=51,e.ids=[51],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2782:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>h,tree:()=>l});var r=a(7096),s=a(6132),d=a(7284),i=a.n(d),n=a(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let l=["",{children:["petugas",{children:["resep",{children:["form",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7295)),"/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/resep/form/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8364)),"/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/resep/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,574)),"/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,9113)),"/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/resep/form/page.tsx"],c="/petugas/resep/form/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/petugas/resep/form/page",pathname:"/petugas/resep/form",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7015:(e,t,a)=>{Promise.resolve().then(a.bind(a,393)),Promise.resolve().then(a.bind(a,3853)),Promise.resolve().then(a.bind(a,5971))},3406:(e,t,a)=>{Promise.resolve().then(a.bind(a,8714))},393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(3854),s=a(7268),d=a(1018),i=a(4218),n=a(8318),o=a(8134);let l=e=>{let[t,a]=(0,i.useState)(!0),l=(0,d.usePathname)(),u=(0,d.useRouter)(),{cekToken:c}=(0,s.Z)(),p=async()=>{let e=await c();if(e?.error)u.push("/login");else{let e=n.Z.get("role");"petugas"!==e&&u.push(`/${e}`)}return e};(0,i.useEffect)(()=>(p(),()=>{}),[l]);let h=async()=>{let e=await p();e?.error||a(!1)};if((0,i.useEffect)(()=>(h(),console.log("pertama render"),()=>{}),[]),t)return r.jsx("div",{className:"flex min-h-screen h-screen justify-center items-center",children:r.jsx(o.Z,{})})}},8714:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var r=a(3854),s=a(4218),d=a(9704),i=a(2478),n=a(2747);a(2094);var o=a(98),l=a(2855),u=a(4012),c=a(6965),p=a(1820);let h=(0,u.Ue)((0,c.mW)((e,t)=>({dtPasien:[],setPasien:async({page:t=1,limit:a=10,search:r})=>{try{let s=await (0,p.hi)({method:"get",url:"/pasien",params:{limit:a,page:t,search:r}});return e(e=>({...e,dtPasien:s.data})),{status:"berhasil",data:s.data}}catch(e){return{status:"error",error:e.response.data}}},setPasienAll:async({search:t})=>{try{let a=await (0,p.hi)({method:"get",url:"/pasien/all",params:{search:t}});return e(e=>({...e,dtPasien:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}}))),m=(0,u.Ue)((0,c.mW)((e,t)=>({dtDokter:[],setDokter:async({page:t=1,limit:a=10,search:r})=>{try{let s=await (0,p.hi)({method:"get",url:"/dokter",params:{limit:a,page:t,search:r}});return e(e=>({...e,dtDokter:s.data})),{status:"berhasil",data:s.data}}catch(e){return{status:"error",error:e.response.data}}},setDokterAll:async({search:t})=>{try{let a=await (0,p.hi)({method:"get",url:"/dokter/all",params:{search:t}});return e(e=>({...e,dtDokter:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}}))),g=({register:e,errors:t,control:a,dtEdit:i,watch:n,setValue:u,tgl_resep:c,setTgl_resep:p})=>{let{setPasienAll:g,dtPasien:x}=h(),{setDokterAll:b,dtDokter:j}=m(),k=async({search:e})=>{await g({search:e}),await b({search:e})};return(0,s.useEffect)(()=>{k({})},[]),(0,r.jsxs)(r.Fragment,{children:[r.jsx(d.Z,{label:"Kode Resep",name:"kode_resep",register:e,required:!0,minLength:3,errors:t.kode_resep,addClass:"col-span-4 lg:col-span-2"}),r.jsx(o.Z,{label:"Tgl. Resep",name:"tgl_resep",control:a,startDate:c,setStartDate:p,required:!0,errors:t.tgl_resep,addClass:"col-span-4 lg:col-span-2"}),j?.data&&r.jsx(l.Z,{label:"Dokter",placeholder:"Pilih Dokter",name:"dokter_id",dataDb:j?.data,body:["id","nm_dokter"],control:a,required:!0,errors:t.dokter_id,addClass:"col-span-4 lg:col-span-2"}),x?.data&&r.jsx(l.Z,{label:"Pasien",placeholder:"Pilih Pasien",name:"pasien_id",dataDb:x?.data,body:["id","nm_pasien"],control:a,required:!0,errors:t.pasien_id,addClass:"col-span-4 lg:col-span-2"}),r.jsx(d.Z,{label:"Diagnosa",name:"diagnosa",register:e,required:!0,minLength:3,errors:t.diagnosa,addClass:"col-span-4"})]})};var x=a(4123),b=a(3941),j=a(8318);let k=({value:e,register:t,required:a,name:s,defaultChecked:d,id:i,errors:n,label:o,onChange:l,checked:u})=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-1 items-start justify-center",children:[r.jsx("input",{type:"checkbox",value:e,id:i.toString(),name:s,...t(s,{required:a}),className:"form-radio h-4 w-4 text-primary",defaultChecked:d,checked:u,onChange:l}),o&&r.jsx("label",{htmlFor:i.toString(),children:o})]}),n?.type==="required"&&r.jsx("p",{className:"text-red-500 font-inter italic text-sm",children:"Tidak boleh kosong"})]});var y=a(1813),f=a(8134),_=a(2591),w=a(4210),v=a(6018),S=a(1018);let P=e=>{let t=e.data,a=t.data,r=a.map(e=>{let t=e.obat_keluar.reduce((e,t)=>e+t.jumlah,0);return e.jumlah-t});return t.data=a.map((e,t)=>({...e,totalStok:r[t]})),t},N=({register:e,watch:t,setObatCek:a,obatCek:d})=>{let{setObatMasuk:i}=(0,v.Z)(),[n,o]=(0,s.useState)(1),[l,u]=(0,s.useState)(10),[c,p]=(0,s.useState)(!0),[h,m]=(0,s.useState)([]),g=(0,S.useRouter)(),x=(0,S.useSearchParams)(),b=x.get("sortby")||"",j=x.get("order")||"",N=x.get("search")||"",Z=async()=>{let e=await i({page:n,limit:l,search:N,sortby:b,order:j});m(P(e?.data)),p(!1)};(0,s.useEffect)(()=>(Z(),()=>{}),[n,l,x]),(0,s.useEffect)(()=>{o(1),Z()},[N,x]);let M=e=>{let t=e.target.value,r=JSON.parse(t),s=d.some(e=>e.id===r.id);if(s){let e=d.filter(e=>e.id!==r.id);a(e)}else a([...d,r])};return r.jsx("div",{className:"flex-1 flex-col h-full grow overflow-y-hidden",children:c?r.jsx(f.Z,{}):(0,r.jsxs)("div",{className:"border bg-white rounded-lg",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-center text-xl my-2",children:"Cari dan Pilih Obat"}),r.jsx("hr",{}),r.jsx(y.Z,{placeholder:"Cari Obat",onChange:e=>{let t=x.get("sortby")||"",a=x.get("order")||"";g.push(`?search=${e}&sortby=${t}&order=${a}`)},addClass:"mt-4 mx-2"})]}),r.jsx("div",{className:"",children:r.jsx(w.Z,{headTable:["No","Nama","Jenis Obat","Tgl. Kadaluarsa","Stok","Aksi"],tableBodies:["obat.nm_obat","obat.jenis.nama","tgl_kadaluarsa","totalStok"],dataTable:h.data,page:n,limit:l,ubah:!1,hapus:!1,costume:(t,a)=>r.jsx(k,{id:t.id,name:"cek",register:e,value:JSON.stringify(t),onChange:M,checked:d.some(e=>e.id===t.id)})})}),h?.last_page>1&&r.jsx("div",{className:"mt-4",children:r.jsx(_.Z,{currentPage:h?.current_page,totalPages:h?.last_page,setPage:o})})]})})},Z=({register:e,errors:t,obatCek:a,setValue:i})=>((0,s.useEffect)(()=>{e()},[a,e]),a.map((a,s)=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"w-4/5",children:r.jsx("span",{children:a?.obat.nm_obat})}),(0,r.jsxs)("td",{children:[r.jsx(d.Z,{name:`obat.${s}.obat_masuk_id`,register:e,value:a.id,type:"hidden"}),r.jsx(d.Z,{name:`obat.${s}.jumlah`,register:e,required:!0,type:"number",valueAsNumber:!0,max:a?.totalStok+a.keluar,min:1,defaultValue:a.keluar,errors:t&&t.obat?t.obat[s]?.jumlah:void 0})]})]},s))),M=({dtEdit:e})=>{let{addData:t,updateData:a}=(0,x.Z)(),[o,l]=(0,s.useState)(new Date),[u,c]=(0,s.useState)({}),[p,h]=(0,s.useState)([]),m=(0,S.useRouter)();(0,s.useEffect)(()=>{let e=JSON.parse(j.Z.get("petugas")||"{}");return c(e),()=>{}},[]);let{register:k,handleSubmit:y,setValue:f,control:_,formState:{errors:w},watch:v,reset:P}=(0,n.cI)(),M=`${new Date().getFullYear()}-${new Date().getMonth()}-${new Date().getDate()}`,A=()=>{f("id",""),f("kode_resep",""),f("pasien_id",""),f("tgl_resep",M),f("dokter_id",""),f("diagnosa","")};(0,s.useEffect)(()=>{if(e){f("id",e.id),f("kode_resep",e.kode_resep),f("pasien_id",e.pasien_id),f("tgl_resep",e.tgl_resep),l(e.tgl_resep&&new Date(e.tgl_resep)),f("dokter_id",e.dokter_id),f("diagnosa",e.diagnosa);let t=e?.obat_keluar&&e.obat_keluar.map(e=>{let t=e.jumlah,a=e.obat_masuk;return{...a,keluar:t}});h(t)}else A()},[e]);let q=async r=>{if(r.petugas_id=u.id,delete r.cek,r.obat=r.obat.filter(e=>p.some(t=>parseInt(t.id)===parseInt(e.obat_masuk_id))),console.log({row:r}),e){let{data:t}=await a(e.id,r);(0,i.Z)({event:t})}else{let{data:e}=await t(r);console.log({data:e}),(0,i.Z)({event:e})}m.push("/petugas/resep")};return console.log({obatCek:p}),r.jsx(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:y(q),children:[r.jsx(d.Z,{name:"id",register:k,type:"hidden"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:r.jsx(g,{register:k,errors:w,dtEdit:e,control:_,watch:v,setValue:f,tgl_resep:o,setTgl_resep:l})}),r.jsx("div",{children:r.jsx(N,{register:k,watch:v,obatCek:p,setObatCek:h})}),p&&p.length>0?(0,r.jsxs)("div",{className:"my-4 bg-white p-4",children:[r.jsx("h2",{className:"text-xl my-2",children:"Informasi Obat Keluar"}),r.jsx("hr",{}),(0,r.jsxs)("table",{className:"w-full border-collapse text-left bg-white mt-4",children:[r.jsx("thead",{className:"",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Nama Obat"}),r.jsx("th",{children:"Jumlah"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:r.jsx(Z,{errors:w,register:k,obatCek:p,setValue:f})})]}),r.jsx("div",{children:r.jsx(b.Z,{type:"submit",onClick:y(q),children:"Simpan"})})]}):r.jsx("p",{children:"Belum ada obat dipilih"})]})})},A=()=>{let[e,t]=(0,s.useState)(null),{setShowResep:a,dtResep:d}=(0,x.Z)(),i=(0,S.useSearchParams)(),n=i?.get("id")||"",o=async e=>{await a(e)};return(0,s.useEffect)(()=>(n&&o(n),()=>{}),[n]),(0,s.useEffect)(()=>(d&&d.id&&t(d),()=>{}),[d]),console.log({dtEdit:e}),r.jsx(M,{dtEdit:e})}},98:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(3854);a(4218);var s=a(2747),d=a(9144),i=a(496),n=a.n(i);let o=({control:e,required:t,name:a,errors:i,addClass:o,label:l,startDate:u,setStartDate:c})=>(0,r.jsxs)("div",{className:o,children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[l,t&&r.jsx("span",{className:"ml-1 text-red-600",children:"*"})]}),r.jsx(s.Qr,{name:a,control:e,rules:{required:t},render:({field:e})=>r.jsx(d.ZP,{selected:u,onChange:t=>{if(t){c(t);let a=n()(t).format("YYYY-MM-DD");e.onChange(a)}else c(null),e.onChange("")},dateFormat:"dd/MM/yyyy",value:u||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4"})}),i?.type==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[l," tidak boleh kosong"]})]})},6018:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(4012),s=a(6965),d=a(1820),i=a(7268);let n=(0,r.Ue)((0,s.mW)((e,t)=>({dtObatMasuk:[],setObatMasuk:async({page:t=1,limit:a=10,search:r,sortby:s,order:n})=>{try{let o=await i.Z.getState().setToken(),l=await (0,d.Sj)({method:"get",url:"/obatMasuk",headers:{Authorization:`Bearer ${o}`},params:{limit:a,page:t,search:r,sortby:s,order:n}});return e(e=>({...e,dtObatMasuk:l.data.data})),{status:"berhasil",data:l.data}}catch(e){return{status:"error",error:e.response?.data}}},setShowObatMasuk:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"get",url:`/obatMasuk/${t}`,headers:{Authorization:`Bearer ${a}`}});return e(e=>({...e,dtObatMasuk:r.data.data})),{status:"berhasil",data:r.data}}catch(e){return{status:"error",error:e.response?.data}}},addData:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"post",url:"/obatMasuk",headers:{Authorization:`Bearer ${a}`},data:t});return e(e=>({dtObatMasuk:{last_page:e.dtObatMasuk.last_page,current_page:e.dtObatMasuk.current_page,data:[r.data.data,...e.dtObatMasuk.data]}})),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"delete",url:`/obatMasuk/${t}`,headers:{Authorization:`Bearer ${a}`}});return e(e=>({dtObatMasuk:{last_page:e.dtObatMasuk.last_page,current_page:e.dtObatMasuk.current_page,data:e.dtObatMasuk.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(t,a)=>{try{let r=await i.Z.getState().setToken(),s=await (0,d.Sj)({method:"PUT",url:`/obatMasuk/${t}`,headers:{Authorization:`Bearer ${r}`},data:a});return e(e=>({dtObatMasuk:{last_page:e.dtObatMasuk.last_page,current_page:e.dtObatMasuk.current_page,data:e.dtObatMasuk.data.map(e=>e.id===t?{...e,...s.data.data}:e)}})),{status:"berhasil update",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}}))),o=n},4123:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(4012),s=a(6965),d=a(1820),i=a(7268);let n=(0,r.Ue)((0,s.mW)((e,t)=>({dtResep:[],setResep:async({page:t=1,limit:a=10,search:r,sortby:s,order:n})=>{try{let o=await i.Z.getState().setToken(),l=await (0,d.Sj)({method:"get",url:"/resep",headers:{Authorization:`Bearer ${o}`},params:{limit:a,page:t,search:r,sortby:s,order:n}});return e(e=>({...e,dtResep:l.data.data})),{status:"berhasil",data:l.data}}catch(e){return{status:"error",error:e.response?.data}}},setShowResep:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"get",url:`/resep/${t}`,headers:{Authorization:`Bearer ${a}`}});return e(e=>({...e,dtResep:r.data.data})),{status:"berhasil",data:r.data}}catch(e){return{status:"error",error:e.response?.data}}},addData:async e=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"post",url:"/resep",headers:{Authorization:`Bearer ${a}`},data:e});return t().setResep({}),{status:"berhasil tambah",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},removeData:async t=>{try{let a=await i.Z.getState().setToken(),r=await (0,d.Sj)({method:"delete",url:`/resep/${t}`,headers:{Authorization:`Bearer ${a}`}});return e(e=>({dtResep:{last_page:e.dtResep.last_page,current_page:e.dtResep.current_page,data:e.dtResep.data.filter(e=>e.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(e){return{status:"error",data:e.response.data}}},updateData:async(e,a)=>{try{let r=await i.Z.getState().setToken(),s=await (0,d.Sj)({method:"PUT",url:`/resep/${e}`,headers:{Authorization:`Bearer ${r}`},data:a});return t().setResep({}),{status:"berhasil update",data:s.data}}catch(e){return{status:"error",data:e.response.data}}}}))),o=n},574:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(4656),s=a(7438),d=a(6365);a(3542);var i=a(5153);let n=(0,i.createProxy)(String.raw`/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/Auth.tsx`),{__esModule:o,$$typeof:l}=n,u=n.default,c=e=>(0,r.jsxs)("div",{className:"min-h-screen bg-white/60 text-gray-800",children:[r.jsx(u,{}),r.jsx("div",{className:"sm:flex ml-64 hidden border-b border-menu-active h-12 items-center justify-center",children:r.jsx(s.ZP,{})}),r.jsx(d.ZP,{type:"petugas"}),r.jsx("div",{className:"p-4 sm:ml-64 pt-10 md:pt-4",children:e.children})]})},7295:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>d,default:()=>o});var r=a(5153);let s=(0,r.createProxy)(String.raw`/media/smarthagar/Assets/Project/NextJS/TA/menas/src/app/petugas/resep/form/page.tsx`),{__esModule:d,$$typeof:i}=s,n=s.default,o=n},8364:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>s});var r=a(4656);a(3542);let s={title:"Daftar Resep"},d=e=>r.jsx(r.Fragment,{children:e.children})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[271,544,308,644,290,50,747,651,930,900,907],()=>a(2782));module.exports=r})();